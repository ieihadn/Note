当我开始在项目中使用版本控制时，这个概念很难理解。我看到很多人，包括我自己在内，都在运行诸如git pull，git push和应用我不理解的进程的命令。为什么我既要提交又要推送？为什么每个新功能都需要一个新分支？在每天使用Git的项目中工作了几个月后，这个概念对我来说非常清晰，我终于可以理解使用Version Controling，更具体地说是使用Git进行协作的全部潜力。

在12月的最后两周，我被要求举办一次有关版本控制的研讨会，更具体地说是如何在项目中使用git。由于研讨会的背景不一，因此我想到了一个小故事来说明Version Control的工作方式及其在项目中的优势。

# 一起盖房子吧

在这个美丽的合作项目中，我们正在尝试一起盖房子。为简单起见，我们只有两个人在那栋房子上工作。我们不是房子的所有者，我们为其他人（利益相关者）处理房子的内容，他告诉我们他想要什么以及他想要什么。

免责声明：我绝不是建筑师，对于实际建造REAL房屋我也知之甚少。请记住，这只是一个故事，可以帮助人们轻松遵循版本控制概念。

# 我们有4面墙-我们的主分公司

我们从4面墙（和屋顶？）开始，它们坚固，耐久且非常精细。这四堵墙代表我们的Master分支。它们目前处于站立状态，已经实施，不会被删除。利益相关者批准了这四堵墙，他甚至可能亲自选择了它们，并且希望保留它们。我们需要做的就是改善这四个墙，并在它们上面或周围构建。无论如何，我们要建造的任何东西都将以这四个墙为基础。

# 所有者想要一间客厅和一间厨房-功能分支

正如我之前提到的，有两个人正在从事这个项目，一个是我自己，另一个是我们称为Bob的人，因为我对名字的想象力为零。每个房间都是特色。在这种情况下，为了使结果最大化，Bob和我将使用不同的功能。我将设计客厅，而鲍勃将设计厨房。到目前为止，一切都很好。简单。

我们都创建了一个功能分支。我们也知道我们必须使用约定来命名我们的分支。因此，我们将以我们的名字，正在处理的内容（在本例中为新功能）以及该功能的名称开始。

- 朱莉娅/功能/客厅
- 鲍勃/功能/厨房

> （命名分支有几种约定。这只是一个建议。）

我们都从Master分支创建功能分支。因此，我们都从相同的4面墙开始。但是，我们的功能分支完全是Master分支的独立副本，对Master分支的内容没有直接影响。这样可以确保，如果Bob或我完全拧紧其中一堵主墙，则包含我们4堵墙的Master分支仍会站立，并在那里倒下。

# 我想将设计保存在本地— git commit

提交就像将更改保存在本地。每个新提交都有一个数字，还代表您可以返回的已保存点，就像在任务游戏中可以返回至先前的保存点一样。因此，当Bob建造厨柜时，他可以提交它们，以免丢失更改，并承诺如果他制造的下一部分会危害厨柜的质量。

每次提交还需要一条消息，并且既然写一个关于您的提交的好习惯是为了让每个人都知道这个“保存点”包括什么，那么甜蜜的鲍勃会写“创建的红色厨柜”。

# 我想将设计保存在存储库中的安全位置— git push

您的存储库是存储所有分支（包括master分支）的地方。就像一个文件夹，其中包含有关项目的所有文件，包括其修订历史记录。

Git push接受所有提交并将其提交到分支的远程版本，该版本在您的在线存储库中可用，所有参与其中的开发人员都可以在其中查看对分支所做的更改。因此，鲍勃将提交提交到他的远程分支，现在我可以看到鲍勃关于红色机柜的提交。

# 我的客厅完成了。现在怎么样？-开发分支和合并请求

我们的开发部门是整合房间（或功能）的地方。在这里，我们尝试将我们的设计（或功能）组合在一起，以查看我们的客厅和厨房是否运作良好。

如果要将客厅添加到开发分支，则必须执行合并请求（或拉请求，具体取决于您使用的平台）。通常，在远程分支上进行合并之前，至少要有一个其他开发人员必须批准您的合并请求。

# 鲍勃的厨房做完了。我们的设计不匹配。—合并冲突

我正在尝试将Bob的新更改合并到我的分支中。但是，如果我没有在Bob的开放式厨房的侧面正确地制作墙壁，该怎么办？我们的设计（代表代码，还记得吗？）有冲突。Git可以自动解决一些冲突，但不能全部解决。Git有时需要您的帮助来确定应保留哪些更改，因为其中有些冲突。换句话说，它需要知道谁的“设计”（或代码）是正确的选择。

假设我是犯错的人（别怪可怜的鲍勃）。我可以告诉Git在涉及厨房墙壁时保留Bob的设计职责，而不是我的。

# 我们什么时候可以将我们的厨房和客厅添加到Master分支中？

项目的这一部分通常涉及测试，涉众和批准（至少）。一旦我们的设计经过了全面的测试，这意味着它们也可以很好地协同工作，并且我们的利益相关者，房屋所有者批准了这些设计，我们可以决定将更改合并到Master分支中。这意味着从现在开始，我们房屋的稳定版本还将包括起居室和厨房。因此，所有新分支机构至少应包括这些房间。

在某些情况下，明智的方法可能是将Master分支的每个先前版本与以前的版本都保留在不同的分支中。但是，处理Master分支的正确方法取决于您的团队和公司的需求或准则。（我使这个故事保持简单。并非每个团队或公司都以相同的方式处理Master分支。）

# 总之，版本控制是轻松和安全协作的核心。

在小组项目中使用Git可以使多个开发人员独立地从事同一项目，而不会不断干扰彼此的输入。每个开发人员都可以获得他们可以修改的独立代码版本，而不必承担破坏稳定版本代码的风险。

复制代码并在不同版本上独立工作的能力使得Git对于任何构建应用程序的人（甚至是一个单独工作的开发人员）都是一个不错的选择。它使您有机会保留代码的多个版本，并跟踪每个更改的所有特征，例如谁做了更改以及何时进行更改。
