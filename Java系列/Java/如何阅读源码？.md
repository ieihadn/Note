阅读源码是每个优秀开发工程师的必经之路，那么这篇文章就来讲解下为什么要阅读源码以及如何阅读源码。

首先来说下为什么要读源码，有学习源码的必要吗？

## 为什么要阅读源码？

关于为什么阅读和学习源码，我个人认为可能有以下几点：

### （一）吊打面试官，应对面试

为了找到更好的工作，应对面试，因为在面试中肯定会问到源码级别的问题，比如：为什么 `HashMap` 是线程不安全的？

如果你没有阅读过源码，面试官可能会对回答的结果不满意，进而导致面试结果不太理想，但如果你对源码有所研究，并能够很好地问答面试官的问题，这可能就是你的加分点，可以形成自己独特的竞争力，吊打面试官，升职加薪不是梦。

### （二）解决问题（bug）

在开发过程中，我们或多或少会遇到 `bug`，比如：在 `foreach` 循环里进行元素的 `remove/add` 操作，为啥有可能会报 `ConcurrentModificationException` 异常？

我们可以先在 `Google、Stack Overflow` 以及对应项目的 `Issues` 里看有没有类似问题以及解决办法，如果没有的话，我们只能通过阅读源码的方式去解决了。如果我们对相关源码有所涉猎，就可以快速定位到问题所在。

### （三）提升编程能力

> 读一本好书，就是和许多高尚的人谈话。 -歌德

和阅读一本好书一样，阅读源码就是和编程大牛面对面交流的机会，在许多优秀的开源项目中，它们的编码规范和架构设计都是很棒的，另外在设计上也使用了大量的设计模式，通过阅读和学习源码，能够快速提升我们的编码水平，以及对设计模式有更深的理解。

同时，在我们阅读完一个源码后，可以触类旁通，能够快速地对其他框架的源码进行阅读和学习，减少时间成本。

除了上述提到的原因之外，可能还有许多，在这里就不一一赘述了，那么在确定了要阅读源码之后，就让我们看下如何阅读源码吧！

## 如何阅读源码？

如何阅读源码取决于你为什么要读源码，比如：

- 如果为了应对面试，那就可以围绕常考的**基础类、集合类、队列、线程、锁**等内容进行阅读和学习；
- 如果是为了解决 `bug`，那么就可以只围绕出现问题的相关类进行阅读分析，随着解决 `bug` 的增多，我相信阅读的源码也会越多，从而更容易去阅读和学习源码；

下面大概说下阅读源码的几点建议：

在阅读之前，可以先从开源项目的官网上看它的架构设计和功能文档，了解这个项目的**整体架构、模块组成以及各个模块之间的联系**。

如果没有对应的项目文档，可以根据代码的模块进行梳理，以形成对项目的初步了解，或者**查看已有的源码解析文章或者书籍**，在阅读源码之前，了解项目的架构和思路会使阅读源码事半功倍。

在了解一个类的时候，可以使用 `ctrl+F12` 来查看类中的成员变量和方法。

![](https://img-blog.csdnimg.cn/20200425220521572.png)

可以通过 IDEA 的 `Diagrams` 功能去了解一个类的继承关系。

![](https://img-blog.csdnimg.cn/20200425223133493.png)

多打**断点调试**，断点追踪源码是很好的阅读源码的方式，可以先通过 `debug` 了解下调用逻辑，都和哪些类有关联，有大致了解后再通过 `debug` 了解整体代码的功能实现，各个类都起到了什么作用，有没有涉及到设计模式等。

另外，优秀的开源项目中肯定会有许多地方应用到了**设计模式**，建议在阅读源码之前，需要对常用的设计模式有大致的了解，不然阅读源码的效率会大大降低。

如果遇到读不懂某部分源码的时候，可以先跳过，之后再回来看，如果属于搞不懂这部分就茶不思饭不想的人，可以在网上找是否有该部分源码的解析或者文档，也可以自己通过**源码注释和测试用例**去阅读学习。

一般优秀的开源项目都会有**单元测试**，可以通过对应类的单元测试去了解方法的含义和用法，加深对源码逻辑的理解。

在阅读源码的时候，可以在代码上加上**注释和总结**，同时还可以画出**时序图和类图**，这样对阅读源码有很大的帮助，可以很清楚地知道类之间的调用关系和依赖关系，也方便以后回顾，重新阅读。

在这里推荐大家一个 IDEA 插件 `SequenceDiagram`，可以根据源码生成调用时序图，便于阅读源码。 

![](https://img-blog.csdnimg.cn/20200425212647983.png)

刚开始阅读源码，不建议直接看框架源码，可以先从 jdk 源码看起：

![](https://img-blog.csdnimg.cn/20200425233945409.png)

jdk 源码也是非常庞大的，可以分模块来阅读，下面是建议的阅读顺序：

1. `java.lang` 包下的基本包装类（`Integer、Long、Double、Float` 等），还有字符串相关类（`String、StringBuffer、StringBuilder` 等）、常用类（`Object、Exception、Thread、ThreadLocal` 等）。
2. `java.lang.ref` 包下的引用类（`WeakReference、SoftReference` 等）
3. `java.lang.annotation` 包下的注解的相关类
4. `java.lang.reflect` 包下的反射的相关类
5. `java.util` 包下为一些工具类，主要由各种容器和集合类（`Map、Set、List` 等）
6. `java.util.concurrent` 为并发包，主要是原子类、锁以及并发工具类
7. `java.io` 和 `java.nio` 可以结合着看
8. `java.time` 主要包含时间相关的类，可以学习下 Java 8 新增的几个
9. `java.net` 包下为网络通信相关的类，可以阅读下 `Socket` 和 `HTTPClient` 相关代码

其他包下的代码也可以做下了解，JDK源码阅读笔记：https://github.com/wupeixuan/JDKSourceCode1.8

再有了一定的源码阅读经验后，可以再去学习 `Spring、Spring Boot、Dubbo、Spring Cloud` 等框架的源码。

# 总结

本文主要介绍了为什么读源码以及如何读源码，供大家参考，每个人都有适合自己的阅读源码的方式，希望可以在学习中去摸索出一套属于自己的方式。

阅读源码不是一蹴而就的，这是持久战，只要你能够坚持下来，肯定受益匪浅。阅读源码的过程比较枯燥，可以在社群里一起讨论学习，这样可能效率更高些。

写得不好的或者大家有什么更好的建议，也欢迎留言讨论。

**最好的关系就是互相成就**，大家的**在看、转发、留言**三连就是我创作的最大动力。

> 参考
>
> 《Java并发编程之美》
>
> 《程序员修炼之道：程序设计入门30讲》
>
> 面试官系统精讲Java源码及大厂真题
>
> 解锁大厂思维：剖析《阿里巴巴Java开发手册》